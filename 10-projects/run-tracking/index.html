<!doctype html>
<html lang="en">

<head>
  <meta name="This is Caleb Kruse's portfolio site: a place to build, show, and save projects">
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-105607174-2"></script>
	<script>
		window.dataLayer = window.dataLayer || [];

		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());

		gtag('config', 'UA-105607174-2');
	</script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Pose Tracking for Runners - 10 Projects</title>

  <link rel="stylesheet" href="../../css/bootstrap.min.css">
  <link rel="stylesheet" href="../../css/font-awesome.min.css">
  <link rel="stylesheet" href="../../css/magnific-popup.css">
  <link rel="stylesheet" href="../../css/animsition.min.css">
  <link rel="stylesheet" href="../../css/animate.css">
  <link rel="stylesheet" href="../../css/pe-icon-7-stroke.css">
  <link rel="stylesheet" href="../../css/jquery.fancybox.min.css">
  <link rel="stylesheet" href="../../css/swiper3.css">
  <link rel="stylesheet" href="../../css/simple-line-icons.css">
  <link rel="stylesheet" href="../../css/ionicons.min.css">
  <link rel="stylesheet" href="../../css/slick.css">
  <link rel="stylesheet" href="../../css/style.min.css">
  <link rel="stylesheet" href="../../css/menu.css">
  <link rel="stylesheet" href="../../css/style-child-theme.min.css">
  <link rel="stylesheet" href="../../css/video_banner.min.css">
  <link rel="stylesheet" href="../../css/lightgallery.min.css">
</head>

<body>
  <!-- MAIN_WRAPPER -->
  <div class="main-wrapper" data-top="992">
    <div class="header_top_bg  header_trans-fixed menu_dark_text" style="padding-bottom: 0;">
      <div class="container-fluid">
        <div class="row">
          <div class="col-xs-12">
            <!-- HEADER -->
            <header class="right-menu left ">
              <!-- MOB MENU ICON -->
              <a href="#" class="mob-nav">
                <div class="hamburger">
                  <span class="line"></span>
                  <span class="line"></span>
                  <span class="line"></span>
                </div>
              </a>

              <!-- NAVIGATION -->
              <nav id="topmenu" class="topmenu ">
                <a href="#" class="mob-nav-close">
                  <span>close</span>
                  <div class="hamburger">
                    <span class="line"></span>
                    <span class="line"></span>
                  </div>
                </a>
                <ul class="menu">
                  <li class="menu-item">
                    <a href="http://calebkruse.com/">home</a>
                  </li>
                  <li id="menu-item-9" class="menu-item menu-item-has-children">
                    <a href="#">topics</a>
                    <ul class="sub-menu">
                      <li class="menu-item">
                        <a href="http://calebkruse.com/ng">National Geographic</a></li>
                      <li class="menu-item">
                        <a href="http://calebkruse.com/ml">Machine Learning</a></li>
                      <li class="menu-item">
                        <a href="http://calebkruse.com/sci">Science</a></li>
                      <li class="menu-item">
                        <a href="http://calebkruse.com/xr">AR/VR</a></li>
                      <li class="menu-item">
                        <a href="http://calebkruse.com/photo">Photography</a></li>
                      <li class="menu-item">
                        <a href="http://calebkruse.com/balloon.html">Balloons</a></li>
                      <li class="menu-item">
                        <a href="http://calebkruse.com/maps.html">Maps</a></li>
                      <li class="menu-item">
                        <a href="http://calebkruse.com/10-projects">Prototypes</a></li>
                    </ul>
                  </li>
                </ul>

              </nav>
            </header>
          </div>
        </div>
      </div>
    </div>


    <div class="container-fluid">
      <div class="hero">
        <div class="row bg_img_running">
          <div class="container">
            <div class="row">
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="row margin-lg-100t margin-md-80t margin-sm-40t margin-xs-30t margin-lg-80b margin-md-55b margin-sm-40b margin-xs-20b">
        <div class="col-xs-12 col-md-offset-1 col-md-10">
          <h1 style="color:#4384d9">10 projects - #4</h1>
          <h1 style="color:#4384d9">running form analysis</h1>
          <h3 class="title" style="color:#222222">using a neural network to generate a 3d pose of a runner and analyze characteristics of their form</h3>
        </div>

      </div>
    </div>

    <div class="container">
      <div class="row margin-xs-20b margin-md-20b margin-lg-40b">
        <div class="col-md-offset-1 col-md-11">

          <div class="text">
            <h5 class="subtitle">project goal</h5>
            <p>
              Much of running improvement involves physiological changes in muscle development, lactate threshold, VO2 max, etc. However, improving running economy/form is can lead to improvement independent of physiology.
            </p>
            <p>
              For this project, I looked to track the pose of a runner, and then use that tracked data to do basic analyses of elements of running form. I think the project is a little bit of a stretch to do in a single day, but it's still fun to get a start on the idea.
            </p>
          </div>
        </div>
      </div>


      <div class="row margin-xs-20b margin-md-20b margin-lg-40b">
        <div class="col-md-offset-1 col-md-11">
          <div class="text">
            <h5 class="subtitle">methods</h5>
            <p>
              The first requirement was to capture footage of runners. I had an old clip of myself running in the winter, and then took a few more new clips of my brothers. I captured standard long-distance running form as well as sprinting. With three subjects, I could establish deviations from norms, and could use the sprinting footage to analyze a different running technique.
            </br>
            </br>
            <h6 class="subtitle">pose tracking</h6>
              The crux of this analysis was accurate pose tracking. After working on skeletal hand tracking at <a href="http://leapmotion.com/">Leap Motion</a> for nearly 5 years, I know that this is no trivial problem. However, open-source neural-network based pose tracking solutions have become quite good in recent years.
            </br>
            </br>
              For my desired analyses, I needed a 3D pose output. Facebook Research released <a href="https://github.com/facebookresearch/VideoPose3D">VideoPose3D</a>. This network first identifies joint keypoints, and then has a secondary network that outputs the most probable 3D pose for that joint configuration. This is one of the few networks that I was able to find that was able to produce a 3D skeletal model from a monocular camera in an uncontrolled setting. An impressive feat to be sure!
            </br>
            </br>
              I found that the tracking performed best when the runner was close to the camera and at an oblique angle, when the subject was easy to isolate from the background, and when the footage was captured at a high frame rate.
            </br>
            </br>
            <h6 class="subtitle">running form analysis</h6>
              I hoped to be able to quantify cadence, position of the foot relative to the body when striking the ground, spine angle, and vertical head movement. Unfortunately, a day is not enough time to work on all of these outputs. To see the analysis in progress, and run it for yourself, you can open this <a href="https://colab.research.google.com/drive/1dvhPAageFaUJCm7SGH757O4oIqS-NcHx?usp=sharing">Google Colab notebook</a>.
              </br>
              </br>
              The most successful metric that I was able to compute was cadence. Here, I tracked the x or y position of a foot through time, and found the dominant frequency components in a Fourier transform of the path.
            </p>

          </div>
        </div>
      </div>

      <div class="row margin-xs-20b margin-md-20b margin-lg-40b">
        <div class="col-md-offset-1 col-md-11">
          <div class="text">
            <h5 class="subtitle">results - pose tracking</h5>
            <p>
              These are the tracked pose outputs. The 2D keypoints are visualized on the left side on top of the original video, and the 3D reconstruction is displayed on the right.
            </p>
            <h6 class="subtitle">alden - jogging</h6>
            <iframe width="560" height="315" src="https://www.youtube.com/embed/yKLi2U9eeFI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
          </br>
          </br>
            <h6 class="subtitle">alden - sprinting</h6>
            <iframe width="560" height="315" src="https://www.youtube.com/embed/XGMjg0v4NI4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
          </br>
          </br>
            <h6 class="subtitle">shepherd - jogging</h6>
            <iframe width="560" height="315" src="https://www.youtube.com/embed/KEBpG0Qv-U4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
          </br>
          </br>
            <h6 class="subtitle">shepherd - sprinting</h6>
            <iframe width="560" height="315" src="https://www.youtube.com/embed/vHll8su07LI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
          </br>
          </br>
            <h6 class="subtitle">caleb - jogging</h6>
            <iframe width="560" height="315" src="https://www.youtube.com/embed/xe6U3eh2eRg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
          </div>
        </div>
      </div>

      <div class="row margin-xs-20b margin-md-20b margin-lg-40b">
        <div class="col-md-offset-1 col-md-11">
          <div class="text">
            <h5 class="subtitle">results - analysis</h5>
            <p>
              From the extracted keypoints, we can plot the cyclic motions of running. Here, we see the alternating motions of a left and right foot during running, and also compare those motions against sprinting.
            </p>
            <img src="figures/Foot Position (X) - Alden Jog.png"></img>
            <p class="subtext">Forward/backward foot motion while jogging</p>
            <img src="figures/Foot Position (X) - Alden Sprint.png"></img>
            <p class="subtext">Forward/backward foot motion while sprinting</p>
            <p>
              We can then find the dominant frequency of these positions in order to calculate the cadence of the runner. Here is an example of a foot position while jogging, displaying the fundamental frequencies and extracting the cadence from that frequency in steps per minute.
              The figure on the right shows the position of a runner's left foot. On the left, this signal is shown in the frequency domain. The spike near 1.5 Hz corresponds to a cadence of 168 steps/min
            </p>
            <img src="figures/Left Foot Y.png"></img>
            <p class="subtext">Frequency and spatial representations of runner's foot position</p>
          </div>
        </div>
      </div>

      <div class="row margin-xs-20b margin-md-20b margin-lg-40b">
        <div class="col-md-offset-1 col-md-11">
          <div class="text">
            <h5 class="subtitle">conclusion</h5>
            <p>
              I was hoping to do more advanced analyses beyond cadence. However, there wasn't enough time. I think the idea certainly has potential, but the accuracy of the metrics will only be as good as the tracking data that is analyzed.
            </br>
            </br>
              The tracking quality was quite impressive. Though it took some effort to optimize the environment for peak tracking performance, the fact that the network can estimate 3D pose with such fidelity from only a monocular camera is very impressive.
            </p>
          </div>
        </div>
      </div>

      <div class="row margin-xs-20b margin-md-20b margin-lg-40b">
        <div class="col-md-offset-1 col-md-11">
          <div class="text">
            <h5 class="subtitle">what would i do next</h5>
            <ul>
              <li>
                Complete the other analyses that were suggested in the project goal.
              </li>
              <li>
                Pull footage of world-class runners from youtube and analyze their form.
              </li>
              <li>
                It would be amazing to run some biomechanical analysis based on the skeletal outputs. For example, plot the runner's center of mass over time.
              </li>
            </ul>
            </br>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer id="footer" class="modern">
    <div class="container no-padd">

      <div class="col-xs-12 footer-socials text-left col-sm-6">
        <a href="https://twitter.com/clkruse" target="_blank">
          <i class="fa fa-twitter"></i>
        </a>
        <a href="https://www.instagram.com/clkruse" target="_blank">
          <i class="fa fa-instagram"></i>
        </a>
      </div>

      <div class="copyright col-xs-12 text-right col-sm-6">
        © Caleb Kruse
      </div>

    </div>
  </footer>

  <script src="../../js/jquery.min.js"></script>
  <script src="https://www.youtube.com/iframe_api"></script>
  <script src="../../js/lib/modernizr-2.6.2.min.js"></script>
  <script src="../../js/lib/scripts.js"></script>
  <script src="../../js/jquery.countdown.min.js"></script>
  <script src="../../js/foxlazy.js"></script>
  <script src="../../js/jquery.easings.min.js"></script>
  <script src="../../js/jquery.multiscroll.min.js"></script>
  <script src="../../js/magnific.js"></script>
  <script src="../../js/TweenMax.min.js"></script>
  <script src="../../js/equalHeightsPlugin.js"></script>
  <script src="../../js/jquery.fancybox.min.js"></script>
  <script src="../../js/jquery.fitvids.js"></script>
  <script src="../../js/swiper3.js"></script>
  <script src="../../js/imagesloaded.pkgd.min.js"></script>
  <script src="../../js/fragment.js"></script>
  <script src="../../js/scrollMonitor.js"></script>
  <script src="../../js/slider-transition.js"></script>
  <script src="../../js/slick.js"></script>
  <script src="../../js/jquery.sliphover.min.js"></script>
  <script src="../../js/pixi.min.js"></script>
  <script src="../../js/lightgallery.min.js"></script>
  <script src="../../js/lib/thumbnails-popup.js"></script>
  <script src="../../js/script.js"></script>

</body>

</html>
